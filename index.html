<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PSS Chat Studio</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="page">
    <header class="topbar">
      <div class="brand">
        <img class="brand-mark" src="assets/brand/logos/PSS_Logo_Navy.png" alt="PSS logo" />
        <div class="brand-text">
          <div class="brand-title">Premium Sports Solutions</div>
          <div class="brand-subtitle">Smarter football decisions</div>
        </div>
      </div>
      <div class="model-pill">openai/gpt-oss-120b:free</div>
    </header>

    <main class="layout">
      <section class="panel voice-panel">
        <h2>VOICE</h2>
        <p class="muted">Kora stays live until you hang up.</p>
        <button id="voiceOrb" class="voice-orb" type="button" aria-label="Start or stop Kora">
          <span class="orb-core"></span>
          <span class="orb-ring"></span>
        </button>
        <div class="voice-label" id="voiceStatus">Kora idle</div>
        <button id="voiceToggle" class="primary">Start Kora</button>
        <div class="voice-hint">Click start, speak naturally, then press hang up to end.</div>
      </section>

      <div class="chat-stack chat-popup">
        <section class="panel chat-panel">
          <div class="chat-header">
            <div>
              <h2>CHAT</h2>
              <p class="muted">System prompt stays inside this thread only.</p>
            </div>
            <div class="chat-actions">
              <button id="clearChat" class="ghost">Clear</button>
              <button id="toggleSystem" class="ghost">System Prompt</button>
            </div>
          </div>

          <div id="systemBlock" class="system-block hidden">
            <div class="system-title">System Prompt</div>
            <textarea id="systemPrompt" rows="4" placeholder="Define how the assistant should behave for this chat..."></textarea>
            <div class="system-hint">Applied to every message in this conversation only.</div>
          </div>

          <div id="messages" class="messages"></div>

          <form id="composer" class="composer">
            <input id="userInput" type="text" placeholder="Ask anything..." autocomplete="off" />
            <button type="submit" class="primary">Send</button>
          </form>
        </section>

        <section class="panel meta-panel">
          <h2>SESSION</h2>
          <p class="muted">API key remains server-side via the local proxy.</p>
          <div class="status" id="envStatus"></div>
          <label class="field">
            <span>Temperature</span>
            <input id="temperature" type="range" min="0" max="1" step="0.05" value="0.7" />
            <div class="range-value" id="temperatureValue">0.70</div>
          </label>
          <label class="field">
            <span>Max Tokens</span>
            <input id="maxTokens" type="number" min="64" max="4096" value="1024" />
          </label>
          <button id="saveSettings" class="primary">Save Settings</button>
          <div id="status" class="status"></div>
        </section>
      </div>
    </main>
  </div>

  <script src="app.js"></script>
  <script type="module" src="voice.js"></script>
</body>
</html>
